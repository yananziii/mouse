{"ast":null,"code":"import { getOverall, getOverallNoKey } from \"../../../api/api.js\";\nimport { getToken } from \"../../../utils/setToken.js\";\nexport default {\n  data() {\n    return {\n      //获取项目信息的参数对象\n      OverallList: [],\n      //需求方搜索框\n      demands: \"\",\n      //项目名称搜索框\n      names: \"\",\n      // 总条数\n      totalCount: 0,\n      // 默认显示第几页\n      currentPage: 1,\n      // 个数选择器\n      pageSizes: [10, 30, 50, 100],\n      // 默认每页显示的条数\n      PageSize: 10\n    };\n  },\n  created() {\n    this.id = JSON.parse(getToken(\"work_num\"));\n    /*     this.token = JSON.parse(getToken(\"admin_token\")); */\n    this.getListNoKey();\n  },\n  methods: {\n    formatter(row, column) {\n      var data = row[column.property];\n      if (data == null) {\n        return data;\n      }\n      data = data.toString();\n      data = data.replace(/\\'/g, \"\");\n      data = data.replace(/\\[/g, \"\");\n      data = data.replace(/\\]/g, \"\");\n      data = data.replace(/\\s*/g, \"\");\n      data = data.replace(/\\s*/g, \"\");\n      data = data.replace(/GX/g, \"保定国信\");\n      data = data.replace(/YD/g, \"成都亿达\");\n      data = data.replace(/JH/g, \"大连金慧\");\n      data = data.replace(/YT/g, \"盐城云腾\");\n      data = data.replace(/WD/g, \"永川文德\");\n      data = data.replace(/RR/g, \"热热\");\n      data = data.replace(/WH/g, \"HRO\");\n      return data;\n    },\n    getListNoKey() {\n      getOverallNoKey(this.id, this.currentPage, this.PageSize).then(res => {\n        if (res.data.ret == 0) {\n          this.OverallList = res.data.data_list;\n          this.totalCount = res.data.total;\n        }\n      });\n    },\n    getList() {\n      getOverall(this.id, this.currentPage, this.PageSize, this.demands, this.names).then(res => {\n        if (res.data.ret == 0) {\n          this.OverallList = res.data.data_list;\n          this.totalCount = res.data.total;\n        }\n      });\n    },\n    fifterUrl(url) {\n      var match = /^((ht|f)tps?):\\/\\/[\\w\\-]+(\\.[\\w\\-]+)+([\\w\\-\\.,@?^=%&:\\/~\\+#]*[\\w\\-\\@?^=%&\\/~\\+#])?$/;\n      return match.test(url);\n    },\n    filterTag(value, row) {\n      return row.project_state == value;\n    },\n    handleSizeChange(val) {\n      // 改变每页显示的条数\n      this.PageSize = val;\n      // 注意：在改变每页显示的条数时，要将页码显示到第一页\n      this.currentPage = 1;\n      // 点击每页显示的条数时，显示第一页\n      if (this.demands == '' && this.names == '') return this.getListNoKey();\n      this.getList();\n    },\n    handleCurrentChange(val) {\n      // 改变默认的页数\n      this.currentPage = val;\n      // 切换页码时，要获取每页显示的条数\n      if (this.demands == '' && this.names == '') return this.getListNoKey();\n      this.getList();\n    },\n    search() {\n      this.currentPage = 1;\n      if (this.demands == '' && this.names == '') return this.getListNoKey();\n      this.getList();\n    }\n  }\n};","map":{"version":3,"names":["getOverall","getOverallNoKey","getToken","data","OverallList","demands","names","totalCount","currentPage","pageSizes","PageSize","created","id","JSON","parse","getListNoKey","methods","formatter","row","column","property","toString","replace","then","res","ret","data_list","total","getList","fifterUrl","url","match","test","filterTag","value","project_state","handleSizeChange","val","handleCurrentChange","search"],"sources":["src/components/Manager/Overview/ProjectO.vue"],"sourcesContent":["<template>\n  <div>\n      <el-card>\n    <!--     面包屑导航 -->\n    <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n      <el-breadcrumb-item :to=\"{ path: '/Notice' }\">首页</el-breadcrumb-item>\n      <el-breadcrumb-item>项资数据总览</el-breadcrumb-item>\n      <el-breadcrumb-item>项目概括</el-breadcrumb-item>\n    </el-breadcrumb>\n    </el-card>\n    <el-card>\n      <el-row :gutter=\"40\">\n          <el-col :span=\"15\" class=\"over-data-des\">\n              项目\n          </el-col>\n        <el-col :span=\"3\">\n          <el-input placeholder=\"需求方\" v-model=\"demands\" \n          @keyup.enter.native=\"search\"\n          size=\"mini\"\n          clearable>\n          </el-input>\n        </el-col>\n        <el-col :span=\"3\">\n          <el-input placeholder=\"项目名称\" v-model=\"names\" \n          @keyup.enter.native=\"search\"\n          size=\"mini\"\n          clearable>\n          </el-input>\n        </el-col>\n        <el-col :span=\"3\">\n        <el-button icon=\"el-icon-search\" circle\n        size=\"mini\" @click=\"search\"> </el-button>\n        </el-col>\n      </el-row>\n      <el-table :data=\"OverallList\"  stripe >\n        <el-table-column\n          label=\"项目id\"\n          prop=\"project_id\"\n          fixed\n        ></el-table-column>\n        <el-table-column\n          fixed\n          prop=\"project_state\"\n          label=\"项目状态\"\n          width=\"100\"\n          :filters=\"[\n            { text: '分发中', value: '0' },\n            { text: '待开启', value: '1' },\n            { text: '试标中', value: '2' },\n            { text: '进行中', value: '3' },\n            { text: '暂停中', value: '4' },\n            { text: '已交付', value: '5' },\n            { text: '终止需求', value: '6' },\n          ]\"\n          :filter-method=\"filterTag\"\n          filter-placement=\"bottom-end\"\n        >\n          <template slot-scope=\"scope\">\n            <el-tag\n              effect=\"dark\"\n              :color=\"\n                scope.row.project_state == '0'\n                  ? 'red'\n                  : scope.row.project_state == '1'\n                  ? 'brown'\n                  : scope.row.project_state == '2'\n                  ? ''\n                  : scope.row.project_state == '3'\n                  ? 'green'\n                  : scope.row.project_state == '4'\n                  ? 'grey'\n                  : scope.row.project_state == '5'\n                  ? 'orange'\n                  : 'pink'\n              \"\n            >\n              <span v-if=\"scope.row.project_state == 0\">分发中</span>\n              <span v-if=\"scope.row.project_state == 1\">待开启</span>\n              <span v-if=\"scope.row.project_state == 2\">试标中</span>\n              <span v-if=\"scope.row.project_state == 3\">进行中</span>\n              <span v-if=\"scope.row.project_state == 4\">暂停中</span>\n              <span v-if=\"scope.row.project_state == 5\">已交付</span>\n              <span v-if=\"scope.row.project_state == 6\">终止需求</span>\n            </el-tag>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label=\"需求方\"\n          prop=\"demand_role\"\n          fixed\n        ></el-table-column>\n        <el-table-column\n          label=\"项目名称\"\n          prop=\"project_name\"\n          fixed\n          width=\"170%\"\n        ></el-table-column>\n        <el-table-column\n          label=\"供应商\"\n          prop=\"provider\"\n          min-width=\"170%\"\n          :formatter=\"formatter\"\n        ></el-table-column>\n        <el-table-column label=\"标注cpd\" prop=\"mark_cpd\"></el-table-column>\n        <el-table-column label=\"质检cpd\" prop=\"quality_cpd\"></el-table-column>\n        <el-table-column\n          label=\"准确率\"\n          prop=\"ac_requ\"\n          width=\"100%\"\n        ></el-table-column>\n        <el-table-column label=\"验收模式\" prop=\"accept_model\">\n          <template slot-scope=\"scope\">\n            <span v-if=\"scope.row.accept_model == 1\">单盲</span>\n            <span v-if=\"scope.row.accept_model == 2\">双盲</span>\n            <span v-if=\"scope.row.accept_model == 3\">抽检</span>\n            <span v-if=\"scope.row.accept_model == 4\">其他</span>\n            <span v-if=\"scope.row.accept_model == 5\">多盲</span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label=\"任务书链接\"\n          min-width=\"100%\"\n          show-overflow-tooltip\n        >\n          <template slot-scope=\"scope\">\n            <span v-if=\"fifterUrl(scope.row.book_con)\">\n              <a\n                :href=\"scope.row.book_con\"\n                target=\"_blank\"\n                class=\"buttonText\"\n                >{{ scope.row.book_con }}</a\n              >\n            </span>\n            <span v-else>{{ scope.row.book_con }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label=\"项目管理表链接\"\n          min-width=\"110%\"\n          show-overflow-tooltip\n        >\n          <template slot-scope=\"scope\">\n            <span v-if=\"fifterUrl(scope.row.project_con)\">\n              <a\n                :href=\"scope.row.project_con\"\n                target=\"_blank\"\n                class=\"buttonText\"\n                >{{ scope.row.project_con }}</a\n              >\n            </span>\n            <span v-else>{{ scope.row.project_con }}</span>\n          </template>\n        </el-table-column>\n        <el-table-column\n          label=\"实际交付日期\"\n          prop=\"actual_time\"\n          min-width=\"100%\"\n        ></el-table-column>\n        <el-table-column\n          label=\"交付备注\"\n          prop=\"deli_note\"\n          :show-overflow-tooltip=\"true\"\n        ></el-table-column>\n        <el-table-column label=\"是否按时交付\" prop=\"is_submit\" min-width=\"100%\">\n          <template slot-scope=\"scope\">\n            <span v-if=\"scope.row.is_submit == 0\">是</span>\n            <span v-if=\"scope.row.is_submit == 1\">否</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"是否一次性交付\" prop=\"is_one\" min-width=\"110%\">\n          <template slot-scope=\"scope\">\n            <span v-if=\"scope.row.is_one == 0\">是</span>\n            <span v-if=\"scope.row.is_one == 1\">否</span>\n          </template>\n        </el-table-column>\n        <el-table-column label=\"返修次数\" prop=\"return_num\"></el-table-column>\n      </el-table>\n      <div>\n        <el-pagination\n          @size-change=\"handleSizeChange\"\n          @current-change=\"handleCurrentChange\"\n          :current-page=\"currentPage\"\n          :page-sizes=\"pageSizes\"\n          :page-size=\"PageSize\"\n          layout=\"total, sizes, prev, pager, next, jumper\"\n          :total=\"totalCount\"\n        >\n        </el-pagination>\n      </div>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { getOverall, getOverallNoKey } from \"../../../api/api.js\";\nimport { getToken } from \"../../../utils/setToken.js\";\n\nexport default {\n  data() {\n    return {\n      //获取项目信息的参数对象\n      OverallList: [],\n      //需求方搜索框\n      demands: \"\",\n      //项目名称搜索框\n      names: \"\",\n      // 总条数\n      totalCount: 0,\n      // 默认显示第几页\n      currentPage: 1,\n      // 个数选择器\n      pageSizes: [10, 30, 50, 100],\n      // 默认每页显示的条数\n      PageSize: 10,\n    };\n  },\n  created() {\n    this.id = JSON.parse(getToken(\"work_num\"));\n/*     this.token = JSON.parse(getToken(\"admin_token\")); */\n    this.getListNoKey();\n  },\n  methods: {\n    formatter(row, column) {\n      var data = row[column.property];\n      if (data == null) {\n        return data;\n      }\n      data = data.toString();\n      data = data.replace(/\\'/g, \"\");\n      data = data.replace(/\\[/g, \"\");\n      data = data.replace(/\\]/g, \"\");\n      data = data.replace(/\\s*/g, \"\");\n      data = data.replace(/\\s*/g, \"\");\n      data = data.replace(/GX/g, \"保定国信\");\n      data = data.replace(/YD/g, \"成都亿达\");\n      data = data.replace(/JH/g, \"大连金慧\");\n      data = data.replace(/YT/g, \"盐城云腾\");\n      data = data.replace(/WD/g, \"永川文德\");\n      data = data.replace(/RR/g, \"热热\");\n      data = data.replace(/WH/g, \"HRO\");\n      return data;\n    },\n    getListNoKey(){\n      getOverallNoKey(\n        this.id,\n        this.currentPage,\n        this.PageSize\n      ).then((res) => {\n        if (res.data.ret == 0) {\n          this.OverallList = res.data.data_list;\n          this.totalCount = res.data.total;\n        }\n      });\n    },\n    getList() {\n      getOverall(\n        this.id,\n        this.currentPage,\n        this.PageSize,\n        this.demands,\n        this.names\n      ).then((res) => {\n        if (res.data.ret == 0) {\n          this.OverallList = res.data.data_list;\n          this.totalCount = res.data.total;\n        }\n      });\n    },\n    fifterUrl(url) {\n      var match =\n        /^((ht|f)tps?):\\/\\/[\\w\\-]+(\\.[\\w\\-]+)+([\\w\\-\\.,@?^=%&:\\/~\\+#]*[\\w\\-\\@?^=%&\\/~\\+#])?$/;\n      return match.test(url);\n    },\n    filterTag(value, row) {\n      return row.project_state == value;\n    },\n    handleSizeChange(val) {\n      // 改变每页显示的条数\n      this.PageSize = val;\n      // 注意：在改变每页显示的条数时，要将页码显示到第一页\n      this.currentPage = 1;\n      // 点击每页显示的条数时，显示第一页\n      if(this.demands == '' && this.names == '') return this.getListNoKey()\n         this.getList()\n    },\n    handleCurrentChange(val) {\n      // 改变默认的页数\n      this.currentPage = val;\n      // 切换页码时，要获取每页显示的条数\n      if(this.demands == '' && this.names == '') return this.getListNoKey()\n         this.getList()\n    },\n    search() {\n      this.currentPage = 1;\n      if(this.demands == '' && this.names == '') return this.getListNoKey()\n         this.getList()\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.over-data-des{\n  font-size: 15px;\n  font-weight: 600;\n  padding-top: 8px;\n}\n</style>\n"],"mappings":"AAkMA,SAAAA,UAAA,EAAAC,eAAA;AACA,SAAAC,QAAA;AAEA;EACAC,KAAA;IACA;MACA;MACAC,WAAA;MACA;MACAC,OAAA;MACA;MACAC,KAAA;MACA;MACAC,UAAA;MACA;MACAC,WAAA;MACA;MACAC,SAAA;MACA;MACAC,QAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,EAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAZ,QAAA;IACA;IACA,KAAAa,YAAA;EACA;EACAC,OAAA;IACAC,UAAAC,GAAA,EAAAC,MAAA;MACA,IAAAhB,IAAA,GAAAe,GAAA,CAAAC,MAAA,CAAAC,QAAA;MACA,IAAAjB,IAAA;QACA,OAAAA,IAAA;MACA;MACAA,IAAA,GAAAA,IAAA,CAAAkB,QAAA;MACAlB,IAAA,GAAAA,IAAA,CAAAmB,OAAA;MACAnB,IAAA,GAAAA,IAAA,CAAAmB,OAAA;MACAnB,IAAA,GAAAA,IAAA,CAAAmB,OAAA;MACAnB,IAAA,GAAAA,IAAA,CAAAmB,OAAA;MACAnB,IAAA,GAAAA,IAAA,CAAAmB,OAAA;MACAnB,IAAA,GAAAA,IAAA,CAAAmB,OAAA;MACAnB,IAAA,GAAAA,IAAA,CAAAmB,OAAA;MACAnB,IAAA,GAAAA,IAAA,CAAAmB,OAAA;MACAnB,IAAA,GAAAA,IAAA,CAAAmB,OAAA;MACAnB,IAAA,GAAAA,IAAA,CAAAmB,OAAA;MACAnB,IAAA,GAAAA,IAAA,CAAAmB,OAAA;MACAnB,IAAA,GAAAA,IAAA,CAAAmB,OAAA;MACA,OAAAnB,IAAA;IACA;IACAY,aAAA;MACAd,eAAA,CACA,KAAAW,EAAA,EACA,KAAAJ,WAAA,EACA,KAAAE,QAAA,CACA,CAAAa,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAArB,IAAA,CAAAsB,GAAA;UACA,KAAArB,WAAA,GAAAoB,GAAA,CAAArB,IAAA,CAAAuB,SAAA;UACA,KAAAnB,UAAA,GAAAiB,GAAA,CAAArB,IAAA,CAAAwB,KAAA;QACA;MACA;IACA;IACAC,QAAA;MACA5B,UAAA,CACA,KAAAY,EAAA,EACA,KAAAJ,WAAA,EACA,KAAAE,QAAA,EACA,KAAAL,OAAA,EACA,KAAAC,KAAA,CACA,CAAAiB,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAArB,IAAA,CAAAsB,GAAA;UACA,KAAArB,WAAA,GAAAoB,GAAA,CAAArB,IAAA,CAAAuB,SAAA;UACA,KAAAnB,UAAA,GAAAiB,GAAA,CAAArB,IAAA,CAAAwB,KAAA;QACA;MACA;IACA;IACAE,UAAAC,GAAA;MACA,IAAAC,KAAA,GACA;MACA,OAAAA,KAAA,CAAAC,IAAA,CAAAF,GAAA;IACA;IACAG,UAAAC,KAAA,EAAAhB,GAAA;MACA,OAAAA,GAAA,CAAAiB,aAAA,IAAAD,KAAA;IACA;IACAE,iBAAAC,GAAA;MACA;MACA,KAAA3B,QAAA,GAAA2B,GAAA;MACA;MACA,KAAA7B,WAAA;MACA;MACA,SAAAH,OAAA,eAAAC,KAAA,oBAAAS,YAAA;MACA,KAAAa,OAAA;IACA;IACAU,oBAAAD,GAAA;MACA;MACA,KAAA7B,WAAA,GAAA6B,GAAA;MACA;MACA,SAAAhC,OAAA,eAAAC,KAAA,oBAAAS,YAAA;MACA,KAAAa,OAAA;IACA;IACAW,OAAA;MACA,KAAA/B,WAAA;MACA,SAAAH,OAAA,eAAAC,KAAA,oBAAAS,YAAA;MACA,KAAAa,OAAA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}