{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { getDetail, editDetail, recallDetail } from \"../../api/api.js\";\nimport { getToken } from \"../../utils/setToken.js\";\nimport moment from \"moment\";\nexport default {\n  data() {\n    return {\n      valueSlider: [2, 10],\n      marks: {\n        2: {\n          style: {\n            color: \"#1989FA\"\n          },\n          label: this.$createElement(\"strong\", \"第一审批人\")\n        },\n        10: {\n          style: {\n            color: \"#1989FA\"\n          },\n          label: this.$createElement(\"strong\", \"第二审批人\")\n        }\n      },\n      detailList: [],\n      dataTime: \"\",\n      roleList: [{\n        value: \"标注专员\",\n        label: \"标注专员\"\n      }, {\n        value: \"质量专员\",\n        label: \"质量专员\"\n      }, {\n        value: \"质控专家\",\n        label: \"质控专家\"\n      }],\n      flagList: [{\n        value: 0,\n        label: \"是\"\n      }, {\n        value: 1,\n        label: \"否\"\n      }],\n      stateList: [{\n        value: 0,\n        label: \"已通过\"\n      }, {\n        value: 1,\n        label: \"未通过\"\n      }, {\n        value: 2,\n        label: \"待审批\"\n      }]\n    };\n  },\n  created() {\n    this.id = JSON.parse(getToken(\"work_num\"));\n    this.getList();\n  },\n  methods: {\n    getSteps(state1, state2) {\n      if (state1 == 0) {\n        if (state2 == 0) {\n          return 3;\n        } else {\n          return 2;\n        }\n      } else {\n        return 1;\n      }\n    },\n    getState(state) {\n      if (state == 0) {\n        return \"已通过\";\n      } else if (state == 1) {\n        return \"未通过\";\n      } else {\n        return \"待审批\";\n      }\n    },\n    getList() {\n      getDetail(this.id, this.$route.query.id).then(res => {\n        if (res.data.ret == 0) {\n          this.detailList = res.data.data[0];\n          this.dataTime = res.data.data[0].data_time;\n        }\n      });\n    },\n    //修改员工生产校验\n    checkEdit(mark_time, mark_number, quality_time, quality_number, over_mark_time, over_mark_number, over_quality_time, over_quality_number) {\n      let sum = Number(mark_time) + Number(quality_time);\n      if (mark_time != 0 && mark_number == 0) {\n        return false;\n      } else if (quality_time != 0 && quality_number == 0) {\n        return false;\n      } else if (over_mark_time != 0 && over_mark_number == 0) {\n        return false;\n      } else if (over_quality_time != 0 && over_quality_number == 0) {\n        return false;\n      } else if (mark_number != 0 && mark_time == 0) {\n        return false;\n      } else if (quality_number != 0 && quality_time == 0) {\n        return false;\n      } else if (over_mark_number != 0 && over_mark_time == 0) {\n        return false;\n      } else if (over_quality_number != 0 && over_quality_time == 0) {\n        return false;\n      } else if (sum > 8) {\n        return false;\n      } else {\n        return true;\n      }\n    },\n    editList() {\n      if (this.detailList.state1 == 1 || this.detailList.state2 == 1) {\n        if (this.checkEdit(this.detailList.mark_time, this.detailList.mark_number, this.detailList.quality_time, this.detailList.quality_number, this.detailList.over_mark_time, this.detailList.over_mark_number, this.detailList.over_quality_time, this.detailList.over_quality_number)) {\n          editDetail(this.detailList).then(res => {\n            console.log(this.detailList.work_overtime);\n            if (res.data.ret == 0) {\n              this.getList();\n              this.$message.success(\"更新成功!\");\n            }\n          });\n        } else {\n          this.$message.error(\"填写不规范，请重新填写!\");\n        }\n      } else {\n        this.$message.error(\"无法操作！\");\n      }\n    },\n    recallList(dataTime) {\n      if (this.detailList.state1 == 2 && this.detailList.state2 == 2) {\n        let nowTime = moment().format(\"YYYY-MM-DD\");\n        let strBefor = moment().subtract(1, \"day\").format(\"YYYY-MM-DD\");\n        if (dataTime == nowTime || dataTime == strBefor) {\n          recallDetail(this.id, this.detailList.id, this.detailList.order_id).then(res => {\n            if (res.data.ret == 0) {\n              this.$router.push({\n                path: \"Produce\"\n              });\n            }\n          });\n        } else {\n          this.$message.error(\"已过撤回DDL!\");\n        }\n      } else {\n        this.$message.error(\"无法操作！\");\n      }\n    }\n  }\n};","map":{"version":3,"names":["getDetail","editDetail","recallDetail","getToken","moment","data","valueSlider","marks","style","color","label","$createElement","detailList","dataTime","roleList","value","flagList","stateList","created","id","JSON","parse","getList","methods","getSteps","state1","state2","getState","state","$route","query","then","res","ret","data_time","checkEdit","mark_time","mark_number","quality_time","quality_number","over_mark_time","over_mark_number","over_quality_time","over_quality_number","sum","Number","editList","console","log","work_overtime","$message","success","error","recallList","nowTime","format","strBefor","subtract","order_id","$router","push","path"],"sources":["src/components/User/Detail.vue"],"sourcesContent":["<template>\n  <div>\n    <el-card>\n      <!--     面包屑导航 -->\n      <el-breadcrumb separator-class=\"el-icon-arrow-right\">\n        <el-breadcrumb-item :to=\"{ path: '/Notice' }\">首页</el-breadcrumb-item>\n        <el-breadcrumb-item>员工填写</el-breadcrumb-item>\n        <el-breadcrumb-item>生产数据详情</el-breadcrumb-item>\n      </el-breadcrumb>\n    </el-card>\n    <el-card>\n      <el-row class=\"detail-title\">审批流程</el-row>\n      <!--        <el-row class=\"detail-silderR\">\n            <el-col :span=\"16\"  class=\"detail-silderC1\">\n                <el-tooltip effect=\"light\"  placement=\"top\" :content=detailList.cause1>              \n                      <el-button  type=\"text\">{{ getState(detailList.state1) }}</el-button>\n                    </el-tooltip>\n\n            </el-col>\n            <el-col  :span=\"3\" class=\"detail-silderC2\">\n                <el-tooltip effect=\"light\"  placement=\"top\" :content=detailList.cause2>              \n                      <el-button  type=\"text\">{{ getState(detailList.state2) }}</el-button>\n                    </el-tooltip>    \n            </el-col>\n        </el-row>\n        <el-slider v-model=\"valueSlider\" range :show-tooltip=\"false\"  :max=\"12\" :marks=\"marks\"></el-slider> -->\n      <el-row>\n        <el-steps\n          space=\"100%\"\n          :active=\"getSteps(detailList.state1, detailList.state2)\"\n        >\n          <el-step title=\"已提报\"></el-step>\n          <el-step\n            :title=\"getState(detailList.state1)\"\n            :description=\"detailList.cause1\"\n          ></el-step>\n          <el-step\n            :title=\"getState(detailList.state2)\"\n            :description=\"detailList.cause2\"\n          ></el-step>\n        </el-steps>\n      </el-row>\n      <el-row class=\"detail-title1\">基本信息</el-row>\n      <el-row class=\"detail-row\">\n        <el-col :span=\"2\" class=\"detail-label1\">表单id</el-col>\n        <el-col :span=\"2\" class=\"detail-info\">\n          <el-input v-model=\"detailList.id\" size=\"mini\" readonly></el-input>\n        </el-col>\n\n        <el-col :span=\"2\" class=\"detail-label2\"> 工作日期 </el-col>\n        <el-col :span=\"2\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.data_time\"\n            size=\"mini\"\n            readonly\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label2\"> 项目名称 </el-col>\n        <el-col :span=\"2\" class=\"detail-info\">\n          <el-input v-model=\"detailList.project_name\" size=\"mini\"></el-input>\n        </el-col>\n      </el-row>\n      <el-row class=\"detail-row\">\n        <el-col :span=\"2\" class=\"detail-label1\">项目角色</el-col>\n        <el-col :span=\"2\" class=\"detail-info\">\n          <el-select v-model=\"detailList.project_role\" size=\"mini\">\n            <el-option\n              v-for=\"item in this.roleList\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            ></el-option>\n          </el-select>\n        </el-col>\n\n        <el-col :span=\"2\" class=\"detail-label2\"> 是否加班 </el-col>\n        <el-col :span=\"2\" class=\"detail-info\">\n          <el-select v-model=\"detailList.work_overtime\" size=\"mini\">\n            <el-option\n              v-for=\"item in this.flagList\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            ></el-option>\n          </el-select>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label2\"> 是否核算绩效 </el-col>\n        <el-col :span=\"2\" class=\"detail-info\">\n          <el-select v-model=\"detailList.account\" size=\"mini\">\n            <el-option\n              v-for=\"item in this.flagList\"\n              :key=\"item.value\"\n              :label=\"item.label\"\n              :value=\"item.value\"\n            ></el-option>\n          </el-select>\n        </el-col>\n      </el-row>\n      <!-- <el-row class=\"detail-row\"> \n            <el-col :span=\"2\" class=\"detail-label1\">项目id</el-col>\n            <el-col :span=\"2\" class=\"detail-info\">\n                <el-input v-model=\"detailList.project_id\" size=\"mini\" readonly></el-input>\n            </el-col>\n \n        <el-col :span=\"2\" class=\"detail-label2\">\n            创建时间 \n        </el-col> \n        <el-col :span=\"2\" class=\"detail-info\">\n                <el-input v-model=\"detailList.create_date\" size=\"mini\" readonly></el-input>\n            </el-col>\n            <el-col :span=\"2\" class=\"detail-label2\">\n          更新时间 \n        </el-col> \n        <el-col :span=\"3\" class=\"detail-info\">\n                <el-input v-model=\"detailList.update_date\" size=\"mini\" readonly></el-input>\n            </el-col>\n            </el-row> -->\n      <el-row class=\"detail-title1\">常班明细</el-row>\n      <el-row class=\"detail-row\">\n        <el-col :span=\"2\" class=\"detail-label1\">标注工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.mark_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>8)value=8;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">标注工作量</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.mark_number\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(value>99999)value=99999;\n                if(value<0)value=null;\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">质检工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.quality_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>8)value=8;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">质检工作量</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.quality_number\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(value>99999)value=99999;\n                if(value<0)value=null;\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">试标工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.test_mark_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>8)value=8;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">培训工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.traing_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>8)value=8;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n      </el-row>\n      <el-row class=\"detail-row\">\n        <el-col :span=\"2\" class=\"detail-label1\">答疑工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.question_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>8)value=8;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">数据处理工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.data_process_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>8)value=8;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">复盘工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.analyse_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>8)value=8;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">其他工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.other_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>8)value=8;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">工损工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.loss_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>8)value=8;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">备注</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input v-model=\"detailList.note\" size=\"mini\" :title=\"rem_title\" :onmouseover=\"rem_title = detailList.note\"\n></el-input>\n        </el-col>\n      </el-row>\n\n      <el-row class=\"detail-title1\">加班明细</el-row>\n      <el-row class=\"detail-row\">\n        <el-col :span=\"2\" class=\"detail-label1\">标注工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.over_mark_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>24)value=24;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">标注工作量</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.over_mark_number\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(value>99999)value=99999;\n                if(value<0)value=null;\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">质检工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.over_quality_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>24)value=24;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">质检工作量</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.over_quality_number\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(value>99999)value=99999;\n                if(value<0)value=null;\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">试标工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.over_test_mark_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>24)value=24;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">培训工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.over_traing_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>24)value=24;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n      </el-row>\n      <el-row class=\"detail-row\">\n        <el-col :span=\"2\" class=\"detail-label1\">答疑工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.over_question_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>24)value=24;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">数据处理工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.over_data_process_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>24)value=24;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">复盘工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.over_analyse_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>24)value=24;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">其他工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.over_other_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>24)value=24;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">工损工时</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input\n            v-model=\"detailList.over_loss_time\"\n            size=\"mini\"\n            type=\"number\"\n            oninput=\"\n                if(!/^[0-9]+$/.test(value)) value=value.replace(/^(\\d+)\\.(\\d\\d).*$/,'$1.$2');\n                if(value>24)value=24;\n                if(value<0)value=null;\n                if(value<0)value=null;\n                if((value[0] == 0 && value[1] > 0) || value == '00')value=value.slice(1);\n                \"\n          ></el-input>\n        </el-col>\n        <el-col :span=\"2\" class=\"detail-label3\">备注</el-col>\n        <el-col :span=\"1\" class=\"detail-info\">\n          <el-input v-model=\"detailList.over_note\" size=\"mini\"></el-input>\n        </el-col>\n      </el-row>\n\n      <el-row class=\"detail-button\">\n        <el-col>\n          <el-button type=\"info\" @click=\"editList()\">修改</el-button></el-col\n        >\n\n        <el-col\n          ><el-button type=\"info\" @click=\"recallList(dataTime)\"\n            >撤回</el-button\n          ></el-col\n        >\n      </el-row>\n    </el-card>\n  </div>\n</template>\n\n<script>\nimport { getDetail, editDetail, recallDetail } from \"../../api/api.js\";\nimport { getToken } from \"../../utils/setToken.js\";\nimport moment from \"moment\";\nexport default {\n  data() {\n    return {\n      valueSlider: [2, 10],\n      marks: {\n        2: {\n          style: {\n            color: \"#1989FA\",\n          },\n          label: this.$createElement(\"strong\", \"第一审批人\"),\n        },\n        10: {\n          style: {\n            color: \"#1989FA\",\n          },\n          label: this.$createElement(\"strong\", \"第二审批人\"),\n        },\n      },\n      detailList: [],\n      dataTime: \"\",\n      roleList: [\n        {\n          value: \"标注专员\",\n          label: \"标注专员\",\n        },\n        {\n          value: \"质量专员\",\n          label: \"质量专员\",\n        },\n        {\n          value: \"质控专家\",\n          label: \"质控专家\",\n        },\n      ],\n      flagList: [\n        {\n          value: 0,\n          label: \"是\",\n        },\n        {\n          value: 1,\n          label: \"否\",\n        },\n      ],\n      stateList: [\n        {\n          value: 0,\n          label: \"已通过\",\n        },\n        {\n          value: 1,\n          label: \"未通过\",\n        },\n        {\n          value: 2,\n          label: \"待审批\",\n        },\n      ],\n    };\n  },\n  created() {\n    this.id = JSON.parse(getToken(\"work_num\"));\n    this.getList();\n  },\n  methods: {\n    getSteps(state1, state2) {\n      if (state1 == 0) {\n        if (state2 == 0) {\n          return 3;\n        } else {\n          return 2;\n        }\n      } else {\n        return 1;\n      }\n    },\n    getState(state) {\n      if (state == 0) {\n        return \"已通过\";\n      } else if (state == 1) {\n        return \"未通过\";\n      } else {\n        return \"待审批\";\n      }\n    },\n    getList() {\n      getDetail(this.id, this.$route.query.id).then((res) => {\n        if (res.data.ret == 0) {\n          this.detailList = res.data.data[0];\n          this.dataTime = res.data.data[0].data_time;\n        }\n      });\n    },\n    //修改员工生产校验\n    checkEdit(\n      mark_time,\n      mark_number,\n      quality_time,\n      quality_number,\n      over_mark_time,\n      over_mark_number,\n      over_quality_time,\n      over_quality_number\n    ) {\n      let sum = Number(mark_time) + Number(quality_time);\n      if (mark_time != 0 && mark_number == 0) {\n        return false;\n      } else if (quality_time != 0 && quality_number == 0) {\n        return false;\n      } else if (over_mark_time != 0 && over_mark_number == 0) {\n        return false;\n      } else if (over_quality_time != 0 && over_quality_number == 0) {\n        return false;\n      } else if (mark_number != 0 && mark_time == 0) {\n        return false;\n      } else if (quality_number != 0 && quality_time == 0) {\n        return false;\n      } else if (over_mark_number != 0 && over_mark_time == 0) {\n        return false;\n      } else if (over_quality_number != 0 && over_quality_time == 0) {\n        return false;\n      } else if (sum > 8) {\n        return false;\n      } else {\n        return true;\n      }\n    },\n    editList() {\n      if (this.detailList.state1 == 1 || this.detailList.state2 == 1) {\n        if (\n          this.checkEdit(\n            this.detailList.mark_time,\n            this.detailList.mark_number,\n            this.detailList.quality_time,\n            this.detailList.quality_number,\n            this.detailList.over_mark_time,\n            this.detailList.over_mark_number,\n            this.detailList.over_quality_time,\n            this.detailList.over_quality_number\n          )\n        ) {\n          editDetail(this.detailList).then((res) => {\n            console.log(this.detailList.work_overtime)\n            if (res.data.ret == 0) {\n              this.getList();\n              this.$message.success(\"更新成功!\");\n            }\n          });\n        } else {\n          this.$message.error(\"填写不规范，请重新填写!\");\n        }\n      } else {\n        this.$message.error(\"无法操作！\");\n      }\n    },\n    recallList(dataTime) {\n      if (this.detailList.state1 == 2 && this.detailList.state2 == 2) {\n        let nowTime = moment().format(\"YYYY-MM-DD\");\n        let strBefor = moment().subtract(1, \"day\").format(\"YYYY-MM-DD\");\n        if (dataTime == nowTime || dataTime == strBefor) {\n          recallDetail(\n            this.id,\n            this.detailList.id,\n            this.detailList.order_id\n          ).then((res) => {\n            if (res.data.ret == 0) {\n              this.$router.push({\n                path: \"Produce\",\n              });\n            }\n          });\n        } else {\n          this.$message.error(\"已过撤回DDL!\");\n        }\n      } else {\n        this.$message.error(\"无法操作！\");\n      }\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.detail-title {\n  font-size: 24px;\n  margin-bottom: 20px;\n}\n.detail-title1 {\n  font-size: 24px;\n  margin-bottom: 20px;\n  margin-top: 20px;\n}\n.detail-label1 {\n  font-size: 14px;\n}\n.detail-label2 {\n  margin-left: 300px;\n  font-size: 14px;\n}\n.detail-label3 {\n  margin-left: 60px;\n  font-size: 14px;\n}\n.detail-info {\n  margin-top: -5px;\n}\n.detail-row {\n  margin-top: 20px;\n}\n.detail-button {\n  margin-top: 20px;\n  display: flex;\n  justify-content: space-around;\n}\n.detail-silderR {\n  margin-top: -5px;\n}\n.detail-silderC1 {\n  font-size: 14px;\n  margin-left: 15.2%;\n}\n.detail-silderC2 {\n  font-size: 14px;\n}\n/*添加css样式*/\n/deep/input[type=\"number\"]::-webkit-inner-spin-button,\n/deep/input[type=\"number\"]::-webkit-outer-spin-button {\n  -webkit-appearance: none !important;\n  margin: 0 !important;\n}\n</style>\n"],"mappings":";AAwdA,SAAAA,SAAA,EAAAC,UAAA,EAAAC,YAAA;AACA,SAAAC,QAAA;AACA,OAAAC,MAAA;AACA;EACAC,KAAA;IACA;MACAC,WAAA;MACAC,KAAA;QACA;UACAC,KAAA;YACAC,KAAA;UACA;UACAC,KAAA,OAAAC,cAAA;QACA;QACA;UACAH,KAAA;YACAC,KAAA;UACA;UACAC,KAAA,OAAAC,cAAA;QACA;MACA;MACAC,UAAA;MACAC,QAAA;MACAC,QAAA,GACA;QACAC,KAAA;QACAL,KAAA;MACA,GACA;QACAK,KAAA;QACAL,KAAA;MACA,GACA;QACAK,KAAA;QACAL,KAAA;MACA,EACA;MACAM,QAAA,GACA;QACAD,KAAA;QACAL,KAAA;MACA,GACA;QACAK,KAAA;QACAL,KAAA;MACA,EACA;MACAO,SAAA,GACA;QACAF,KAAA;QACAL,KAAA;MACA,GACA;QACAK,KAAA;QACAL,KAAA;MACA,GACA;QACAK,KAAA;QACAL,KAAA;MACA;IAEA;EACA;EACAQ,QAAA;IACA,KAAAC,EAAA,GAAAC,IAAA,CAAAC,KAAA,CAAAlB,QAAA;IACA,KAAAmB,OAAA;EACA;EACAC,OAAA;IACAC,SAAAC,MAAA,EAAAC,MAAA;MACA,IAAAD,MAAA;QACA,IAAAC,MAAA;UACA;QACA;UACA;QACA;MACA;QACA;MACA;IACA;IACAC,SAAAC,KAAA;MACA,IAAAA,KAAA;QACA;MACA,WAAAA,KAAA;QACA;MACA;QACA;MACA;IACA;IACAN,QAAA;MACAtB,SAAA,MAAAmB,EAAA,OAAAU,MAAA,CAAAC,KAAA,CAAAX,EAAA,EAAAY,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAA3B,IAAA,CAAA4B,GAAA;UACA,KAAArB,UAAA,GAAAoB,GAAA,CAAA3B,IAAA,CAAAA,IAAA;UACA,KAAAQ,QAAA,GAAAmB,GAAA,CAAA3B,IAAA,CAAAA,IAAA,IAAA6B,SAAA;QACA;MACA;IACA;IACA;IACAC,UACAC,SAAA,EACAC,WAAA,EACAC,YAAA,EACAC,cAAA,EACAC,cAAA,EACAC,gBAAA,EACAC,iBAAA,EACAC,mBAAA,EACA;MACA,IAAAC,GAAA,GAAAC,MAAA,CAAAT,SAAA,IAAAS,MAAA,CAAAP,YAAA;MACA,IAAAF,SAAA,SAAAC,WAAA;QACA;MACA,WAAAC,YAAA,SAAAC,cAAA;QACA;MACA,WAAAC,cAAA,SAAAC,gBAAA;QACA;MACA,WAAAC,iBAAA,SAAAC,mBAAA;QACA;MACA,WAAAN,WAAA,SAAAD,SAAA;QACA;MACA,WAAAG,cAAA,SAAAD,YAAA;QACA;MACA,WAAAG,gBAAA,SAAAD,cAAA;QACA;MACA,WAAAG,mBAAA,SAAAD,iBAAA;QACA;MACA,WAAAE,GAAA;QACA;MACA;QACA;MACA;IACA;IACAE,SAAA;MACA,SAAAlC,UAAA,CAAAa,MAAA,cAAAb,UAAA,CAAAc,MAAA;QACA,IACA,KAAAS,SAAA,CACA,KAAAvB,UAAA,CAAAwB,SAAA,EACA,KAAAxB,UAAA,CAAAyB,WAAA,EACA,KAAAzB,UAAA,CAAA0B,YAAA,EACA,KAAA1B,UAAA,CAAA2B,cAAA,EACA,KAAA3B,UAAA,CAAA4B,cAAA,EACA,KAAA5B,UAAA,CAAA6B,gBAAA,EACA,KAAA7B,UAAA,CAAA8B,iBAAA,EACA,KAAA9B,UAAA,CAAA+B,mBAAA,CACA,EACA;UACA1C,UAAA,MAAAW,UAAA,EAAAmB,IAAA,CAAAC,GAAA;YACAe,OAAA,CAAAC,GAAA,MAAApC,UAAA,CAAAqC,aAAA;YACA,IAAAjB,GAAA,CAAA3B,IAAA,CAAA4B,GAAA;cACA,KAAAX,OAAA;cACA,KAAA4B,QAAA,CAAAC,OAAA;YACA;UACA;QACA;UACA,KAAAD,QAAA,CAAAE,KAAA;QACA;MACA;QACA,KAAAF,QAAA,CAAAE,KAAA;MACA;IACA;IACAC,WAAAxC,QAAA;MACA,SAAAD,UAAA,CAAAa,MAAA,cAAAb,UAAA,CAAAc,MAAA;QACA,IAAA4B,OAAA,GAAAlD,MAAA,GAAAmD,MAAA;QACA,IAAAC,QAAA,GAAApD,MAAA,GAAAqD,QAAA,WAAAF,MAAA;QACA,IAAA1C,QAAA,IAAAyC,OAAA,IAAAzC,QAAA,IAAA2C,QAAA;UACAtD,YAAA,CACA,KAAAiB,EAAA,EACA,KAAAP,UAAA,CAAAO,EAAA,EACA,KAAAP,UAAA,CAAA8C,QAAA,CACA,CAAA3B,IAAA,CAAAC,GAAA;YACA,IAAAA,GAAA,CAAA3B,IAAA,CAAA4B,GAAA;cACA,KAAA0B,OAAA,CAAAC,IAAA;gBACAC,IAAA;cACA;YACA;UACA;QACA;UACA,KAAAX,QAAA,CAAAE,KAAA;QACA;MACA;QACA,KAAAF,QAAA,CAAAE,KAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}