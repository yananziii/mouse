{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { passWd } from \"@/api/api.js\";\nexport default {\n  data() {\n    var validatePass2 = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请再次输入密码\"));\n      } else if (value !== this.modifyForm.password) {\n        callback(new Error(\"两次输入密码不一致!\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      modifyForm: {\n        first_name: \"\",\n        work_num: \"\",\n        email: \"\",\n        work_time: \"\",\n        university: \"\",\n        password: \"\",\n        password1: \"\"\n      },\n      modifyFormRules: {\n        work_num: [{\n          required: true,\n          message: \"工号为必填项！\",\n          trigger: \"blur\"\n        }],\n        first_name: [{\n          required: true,\n          message: \"姓名为必填项！\",\n          trigger: \"blur\"\n        }],\n        email: [{\n          required: true,\n          message: \"邮箱为必填项！\",\n          trigger: \"blur\"\n        }, {\n          pattern: /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/,\n          message: \"请输入正确邮箱格式\"\n        }],\n        work_time: [{\n          required: true,\n          message: \"入职时间为必填项！\",\n          trigger: \"blur\"\n        }],\n        university: [{\n          required: true,\n          message: \"学院专业为必填项！\",\n          trigger: \"blur\"\n        }],\n        password: [{\n          required: true,\n          message: \"密码为必填项！\",\n          trigger: \"blur\"\n        }, {\n          pattern: /(^(?![0-9]+$)(?![a-zA-Z]+$)[0-9a-zA-Z]{8,20}$)/,\n          message: \"请输入正确密码格式\"\n        }],\n        password1: [{\n          required: true,\n          validator: validatePass2,\n          trigger: \"blur\"\n        }]\n      }\n    };\n  },\n  created() {},\n  methods: {\n    //添加表单更改日期格式\n    getDate(date) {\n      this.modifyForm.data_time = date;\n    },\n    modify() {\n      //弹框是否重置密码\n      const confirmResult = this.$confirm(\"此操作将永久修改密码, 是否继续?\", \"提示\", {\n        confirmButtonText: \"确定\",\n        cancelButtonText: \"取消\",\n        type: \"warning\"\n      }).then(() => {\n        passWd(this.modifyForm).then(res => {\n          if (res.data.ret == 0) {\n            this.$message.success(\"密码重置成功！\");\n            window.localStorage.clear();\n            this.$router.push(\"/Login\");\n          }\n        });\n      }).catch(() => {\n        this.$message.error(\"修改取消\");\n      });\n    }\n  }\n};","map":{"version":3,"names":["passWd","data","validatePass2","rule","value","callback","Error","modifyForm","password","first_name","work_num","email","work_time","university","password1","modifyFormRules","required","message","trigger","pattern","validator","created","methods","getDate","date","data_time","modify","confirmResult","$confirm","confirmButtonText","cancelButtonText","type","then","res","ret","$message","success","window","localStorage","clear","$router","push","catch","error"],"sources":["src/components/Personal/Passwd.vue"],"sourcesContent":["<template>\n  <div>\n    <h1>密码重置</h1>\n\n    <el-card>\n      <el-form\n        :model=\"modifyForm\"\n        :rules=\"modifyFormRules\"\n        ref=\"modifyFormRef\"\n        label-width=\"100px\"\n      >\n        <el-form-item label=\"姓名\" prop=\"first_name\">\n          <el-input v-model=\"modifyForm.first_name\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"工号\" prop=\"work_num\">\n          <el-input v-model=\"modifyForm.work_num\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"工作邮箱\" prop=\"email\">\n          <el-input v-model=\"modifyForm.email\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"入职时间\" prop=\"work_time\">\n          <el-input\n            v-model=\"modifyForm.work_time\"\n            type=\"date\"\n            format=\"yyyy-MM-dd\"\n            value-format=\"yyyy-MM-dd\"\n            @change=\"getDate\"\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"学院专业\" prop=\"university\">\n          <el-input v-model=\"modifyForm.university\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"新密码\" prop=\"password\">\n          <el-input\n            v-model=\"modifyForm.password\"\n            placeholder=\"由字母和数字组成的8-20位字符串！\"\n            type=\"password\"\n            show-password\n          ></el-input>\n        </el-form-item>\n        <el-form-item label=\"确认密码\" prop=\"password1\">\n          <el-input\n            v-model=\"modifyForm.password1\"\n            type=\"password\"\n            show-password\n            @keyup.enter.native=\"modify\"\n          ></el-input>\n        </el-form-item>\n      </el-form>\n    </el-card>\n    <!-- 底部 -->\n    <span slot=\"footer\" class=\"dialog-footer\">\n      <div>\n        <el-button type=\"primary\" @click=\"modify\">修改密码</el-button>\n      </div>\n    </span>\n  </div>\n</template>\n\n<script>\nimport { passWd } from \"@/api/api.js\";\nexport default {\n  data() {\n    var validatePass2 = (rule, value, callback) => {\n      if (value === \"\") {\n        callback(new Error(\"请再次输入密码\"));\n      } else if (value !== this.modifyForm.password) {\n        callback(new Error(\"两次输入密码不一致!\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      modifyForm: {\n        first_name: \"\",\n        work_num: \"\",\n        email: \"\",\n        work_time: \"\",\n        university: \"\",\n        password: \"\",\n        password1: \"\",\n      },\n      modifyFormRules: {\n        work_num: [\n          { required: true, message: \"工号为必填项！\", trigger: \"blur\" },\n        ],\n        first_name: [\n          { required: true, message: \"姓名为必填项！\", trigger: \"blur\" },\n        ],\n        email: [\n          { required: true, message: \"邮箱为必填项！\", trigger: \"blur\" },\n          {\n            pattern: /^\\w+([-+.]\\w+)*@\\w+([-.]\\w+)*\\.\\w+([-.]\\w+)*$/,\n            message: \"请输入正确邮箱格式\",\n          },\n        ],\n        work_time: [\n          { required: true, message: \"入职时间为必填项！\", trigger: \"blur\" },\n        ],\n        university: [\n          { required: true, message: \"学院专业为必填项！\", trigger: \"blur\" },\n        ],\n        password: [\n          { required: true, message: \"密码为必填项！\", trigger: \"blur\" },\n          {\n            pattern: /(^(?![0-9]+$)(?![a-zA-Z]+$)[0-9a-zA-Z]{8,20}$)/,\n            message: \"请输入正确密码格式\",\n          },\n        ],\n        password1: [\n          { required: true, validator: validatePass2, trigger: \"blur\" },\n        ],\n      },\n    };\n  },\n  created() {},\n  methods: {\n    //添加表单更改日期格式\n    getDate(date) {\n      this.modifyForm.data_time = date;\n    },\n    modify() {\n      //弹框是否重置密码\n      const confirmResult = this.$confirm(\n        \"此操作将永久修改密码, 是否继续?\",\n        \"提示\",\n        {\n          confirmButtonText: \"确定\",\n          cancelButtonText: \"取消\",\n          type: \"warning\",\n        }\n      )\n        .then(() => {\n          passWd(this.modifyForm).then((res) => {\n            if (res.data.ret == 0) {\n              this.$message.success(\"密码重置成功！\");\n              window.localStorage.clear();\n              this.$router.push(\"/Login\");\n            }\n          });\n        })\n        .catch(() => {\n          this.$message.error(\"修改取消\");\n        });\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.dialog-footer {\n  display: flex;\n  justify-content: flex-end;\n}\n</style>\n"],"mappings":";AA4DA,SAAAA,MAAA;AACA;EACAC,KAAA;IACA,IAAAC,aAAA,GAAAA,CAAAC,IAAA,EAAAC,KAAA,EAAAC,QAAA;MACA,IAAAD,KAAA;QACAC,QAAA,KAAAC,KAAA;MACA,WAAAF,KAAA,UAAAG,UAAA,CAAAC,QAAA;QACAH,QAAA,KAAAC,KAAA;MACA;QACAD,QAAA;MACA;IACA;IACA;MACAE,UAAA;QACAE,UAAA;QACAC,QAAA;QACAC,KAAA;QACAC,SAAA;QACAC,UAAA;QACAL,QAAA;QACAM,SAAA;MACA;MACAC,eAAA;QACAL,QAAA,GACA;UAAAM,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAT,UAAA,GACA;UAAAO,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAP,KAAA,GACA;UAAAK,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UACAC,OAAA;UACAF,OAAA;QACA,EACA;QACAL,SAAA,GACA;UAAAI,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAL,UAAA,GACA;UAAAG,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,EACA;QACAV,QAAA,GACA;UAAAQ,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA,GACA;UACAC,OAAA;UACAF,OAAA;QACA,EACA;QACAH,SAAA,GACA;UAAAE,QAAA;UAAAI,SAAA,EAAAlB,aAAA;UAAAgB,OAAA;QAAA;MAEA;IACA;EACA;EACAG,QAAA;EACAC,OAAA;IACA;IACAC,QAAAC,IAAA;MACA,KAAAjB,UAAA,CAAAkB,SAAA,GAAAD,IAAA;IACA;IACAE,OAAA;MACA;MACA,MAAAC,aAAA,QAAAC,QAAA,CACA,qBACA,MACA;QACAC,iBAAA;QACAC,gBAAA;QACAC,IAAA;MACA,EACA,CACAC,IAAA;QACAhC,MAAA,MAAAO,UAAA,EAAAyB,IAAA,CAAAC,GAAA;UACA,IAAAA,GAAA,CAAAhC,IAAA,CAAAiC,GAAA;YACA,KAAAC,QAAA,CAAAC,OAAA;YACAC,MAAA,CAAAC,YAAA,CAAAC,KAAA;YACA,KAAAC,OAAA,CAAAC,IAAA;UACA;QACA;MACA,GACAC,KAAA;QACA,KAAAP,QAAA,CAAAQ,KAAA;MACA;IACA;EACA;AACA"},"metadata":{},"sourceType":"module","externalDependencies":[]}